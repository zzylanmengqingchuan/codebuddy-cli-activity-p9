<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíï Êµ™Êº´3DÁÖßÁâáÂ¢ô & ÊÅãÁà±Â§©Êï∞ËÆ°ÁÆóÂô®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'Helvetica Neue', 'Microsoft YaHei', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 25%, #fecfef 75%, #ff9a9e 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            background-attachment: fixed;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 182, 193, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(255, 105, 180, 0.3) 0%, transparent 40%),
                radial-gradient(circle at 40% 60%, rgba(238, 130, 238, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
            animation: backgroundFloat 20s ease-in-out infinite;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-15px) rotate(1deg); }
            66% { transform: translateY(10px) rotate(-1deg); }
        }

        .container {
            max-width: 450px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* ÊÅãÁà±‰ø°ÊÅØËæìÂÖ•ÁïåÈù¢Ê†∑Âºè */
        .love-info-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 35px;
            padding: 50px 35px;
            box-shadow: 
                0 25px 80px rgba(255, 105, 180, 0.4),
                0 15px 40px rgba(0, 0, 0, 0.1),
                inset 0 2px 0 rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255, 182, 193, 0.4);
            animation: slideInUp 1s ease-out;
            position: relative;
            overflow: hidden;
        }

        .love-info-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255, 182, 193, 0.1), transparent);
            animation: rotate 10s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(60px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            font-weight: 800;
            text-shadow: 0 4px 8px rgba(255, 105, 180, 0.3);
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .subtitle {
            color: #777;
            font-size: 1.1rem;
            font-weight: 400;
            font-style: italic;
        }

        .love-form {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .couple-inputs {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .input-group {
            flex: 1;
        }

        .input-group label {
            display: block;
            margin-bottom: 12px;
            color: #666;
            font-size: 1rem;
            font-weight: 600;
        }

        .input-group input {
            width: 100%;
            padding: 18px 24px;
            border: 2px solid rgba(255, 182, 193, 0.4);
            border-radius: 30px;
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.4s ease;
            outline: none;
            font-weight: 500;
        }

        .input-group input:focus {
            border-color: #ff69b4;
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.4);
            transform: translateY(-3px);
        }

        .heart-connector {
            font-size: 2.5rem;
            animation: heartBeat 2s ease-in-out infinite;
            margin-top: 30px;
            user-select: none;
            filter: drop-shadow(0 4px 8px rgba(255, 105, 180, 0.5));
        }

        @keyframes heartBeat {
            0%, 50%, 100% {
                transform: scale(1);
            }
            25%, 75% {
                transform: scale(1.3);
            }
        }

        .date-input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .date-input-group label {
            color: #666;
            font-size: 1rem;
            font-weight: 600;
        }

        .date-input-group input {
            padding: 18px 24px;
            border: 2px solid rgba(255, 182, 193, 0.4);
            border-radius: 30px;
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.4s ease;
            outline: none;
            font-weight: 500;
        }

        .date-input-group input:focus {
            border-color: #ff69b4;
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.4);
        }

        /* ‰∏ä‰º†Âå∫ÂüüÊ†∑Âºè */
        .upload-area {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 182, 193, 0.1));
            border: 3px dashed rgba(255, 105, 180, 0.6);
            border-radius: 25px;
            padding: 50px 25px;
            margin: 25px 0;
            cursor: pointer;
            transition: all 0.4s ease;
            backdrop-filter: blur(15px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .upload-area:hover::before {
            left: 100%;
        }

        .upload-area:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 182, 193, 0.2));
            border-color: #ff1744;
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 105, 180, 0.3);
        }

        .upload-area.dragover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(255, 182, 193, 0.3));
            border-color: #ff1744;
            transform: scale(1.05);
            box-shadow: 0 20px 50px rgba(255, 105, 180, 0.4);
        }

        .upload-content {
            color: #666;
            position: relative;
            z-index: 1;
        }

        .upload-content svg {
            margin-bottom: 20px;
            opacity: 0.8;
            color: #ff69b4;
            filter: drop-shadow(0 2px 4px rgba(255, 105, 180, 0.3));
        }

        .upload-content p {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .upload-hint {
            font-size: 1rem !important;
            opacity: 0.8;
            font-weight: 400 !important;
        }

        .demo-btn {
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-weight: 600;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.4);
        }

        .demo-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 105, 180, 0.6);
        }

        .uploaded-count {
            text-align: center;
            color: #666;
            font-size: 1.1rem;
            margin: 20px 0;
            padding: 15px 25px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 182, 193, 0.1));
            border-radius: 25px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 182, 193, 0.3);
            font-weight: 600;
        }

        .create-wall-btn {
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
            color: white;
            border: none;
            padding: 22px 35px;
            border-radius: 35px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-weight: 700;
            box-shadow: 0 15px 40px rgba(255, 105, 180, 0.5);
            position: relative;
            overflow: hidden;
            width: 100%;
            margin-top: 25px;
        }

        .create-wall-btn:disabled {
            background: linear-gradient(135deg, #ccc, #999);
            cursor: not-allowed;
            box-shadow: none;
            transform: none !important;
        }

        .create-wall-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .create-wall-btn:hover:not(:disabled)::before {
            left: 100%;
        }

        .create-wall-btn:hover:not(:disabled) {
            transform: translateY(-4px);
            box-shadow: 0 20px 50px rgba(255, 105, 180, 0.6);
        }

        .create-wall-btn.ready {
            animation: buttonGlow 2s ease-in-out infinite alternate;
        }

        @keyframes buttonGlow {
            from {
                box-shadow: 0 15px 40px rgba(255, 105, 180, 0.5);
            }
            to {
                box-shadow: 0 20px 60px rgba(255, 105, 180, 0.8);
            }
        }

        /* ÁÖßÁâáÂ¢ôÂÆπÂô®Ê†∑Âºè */
        .photo-wall-container {
            margin-top: 40px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ÊÅãÁà±‰ø°ÊÅØÊòæÁ§∫ */
        .love-display {
            text-align: center;
            margin-bottom: 35px;
            padding: 35px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(255, 105, 180, 0.4);
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255, 182, 193, 0.4);
            position: relative;
            overflow: hidden;
        }

        .love-display::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff6b9d, #ff1744, #ff6b9d, #ff1744);
            background-size: 400% 400%;
            animation: gradientShift 3s ease infinite;
            z-index: -1;
            border-radius: 30px;
            filter: blur(8px);
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .love-display .couple-names {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 700;
            flex-wrap: wrap;
        }

        .love-display .name1, 
        .love-display .name2 {
            color: #ff1744;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(255, 182, 193, 0.3), rgba(255, 255, 255, 0.5));
            border-radius: 25px;
            border: 2px solid rgba(255, 105, 180, 0.4);
            backdrop-filter: blur(10px);
            animation: nameGlow 2s ease-in-out infinite alternate;
        }

        @keyframes nameGlow {
            from { box-shadow: 0 5px 15px rgba(255, 105, 180, 0.3); }
            to { box-shadow: 0 8px 25px rgba(255, 105, 180, 0.5); }
        }

        .love-display .love-symbol {
            font-size: 2.5rem;
            animation: heartBeat 2s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(255, 105, 180, 0.5));
        }

        .love-days {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .love-text {
            color: #777;
            font-size: 1.3rem;
            font-weight: 500;
        }

        .love-days .days-number {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: numberPulse 3s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(255, 105, 180, 0.3));
        }

        @keyframes numberPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .love-days .days-unit {
            font-size: 1.8rem;
            color: #ff1744;
            font-weight: 700;
        }

        /* ÊéßÂà∂ÊåâÈíÆÊ†∑ÂºèÊõ¥Êñ∞ */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 35px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 182, 193, 0.3);
            flex-wrap: wrap;
            gap: 20px;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.2);
        }

        #resetBtn {
            background: linear-gradient(135deg, rgba(255, 182, 193, 0.8), rgba(255, 105, 180, 0.6));
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-weight: 600;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.3);
        }

        #resetBtn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 105, 180, 0.4);
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 25px;
            color: #666;
            font-weight: 600;
        }

        /* Ëá™ÂÆö‰πâÂºÄÂÖ≥Ê†∑Âºè */
        .switch {
            position: relative;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
            background: linear-gradient(135deg, rgba(255, 182, 193, 0.5), rgba(255, 105, 180, 0.3));
            border-radius: 30px;
            transition: 0.4s;
            cursor: pointer;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 24px;
            width: 24px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.4s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        input:checked + .slider {
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1rem;
        }

        .speed-control input[type="range"] {
            width: 100px;
            height: 6px;
            background: linear-gradient(135deg, rgba(255, 182, 193, 0.5), rgba(255, 105, 180, 0.3));
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        .speed-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .share-btn {
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-weight: 700;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.4);
        }

        .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 105, 180, 0.6);
        }

        /* ÊòæÁ§∫Ê®°ÂºèÊéßÂà∂ */
        .display-mode-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 182, 193, 0.3);
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.2);
        }

        .mode-btn {
            background: rgba(255, 182, 193, 0.4);
            color: #ff1744;
            border: 2px solid rgba(255, 182, 193, 0.6);
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
            color: white;
            border-color: #ff1744;
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.4);
        }

        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.4);
        }

        /* 3DÁÖßÁâáÂ¢ôÊ†∑Âºè */
        .photo-wall-wrapper {
            perspective: 2500px;
            perspective-origin: center center;
            height: 75vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            background: 
                radial-gradient(ellipse at top, rgba(255,182,193,0.2) 0%, transparent 50%),
                radial-gradient(ellipse at bottom, rgba(138,43,226,0.15) 0%, transparent 50%),
                linear-gradient(135deg, rgba(25,25,112,0.9) 0%, rgba(72,61,139,0.7) 50%, rgba(123,104,238,0.5) 100%);
            border-radius: 30px;
            border: 2px solid rgba(255, 182, 193, 0.4);
            box-shadow: 0 20px 60px rgba(255, 105, 180, 0.3);
        }

        /* ÁÖßÁâáÊªëÂä®ÁîªÂªäÊ†∑Âºè */
        .photo-gallery {
            position: relative;
            height: 75vh;
            border-radius: 30px;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6));
            box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.3), 0 20px 60px rgba(255, 105, 180, 0.3);
            border: 2px solid rgba(255, 182, 193, 0.4);
            display: none;
        }

        .photo-gallery.active {
            display: block;
        }

        .photo-slider {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .photo-track {
            display: flex;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        .photo-slide {
            min-width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .photo-frame {
            position: relative;
            max-width: 80%;
            max-height: 80%;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 
                0 30px 100px rgba(0, 0, 0, 0.8),
                0 15px 50px rgba(0, 0, 0, 0.6),
                0 5px 20px rgba(0, 0, 0, 0.4);
            border: 4px solid rgba(255, 255, 255, 0.9);
            background: white;
            transform: perspective(1000px) rotateY(0deg);
            transition: all 0.6s ease;
        }

        .photo-frame:hover {
            transform: perspective(1000px) rotateY(5deg) scale(1.05);
            box-shadow: 
                0 40px 120px rgba(0, 0, 0, 0.9),
                0 20px 60px rgba(255, 105, 180, 0.5),
                0 10px 30px rgba(138, 43, 226, 0.3);
        }

        .photo-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            border-radius: 16px;
        }

        /* ÁÖßÁâá‰ø°ÊÅØË¶ÜÁõñÂ±Ç */
        .photo-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: white;
            padding: 30px 20px 20px;
            transform: translateY(100%);
            transition: transform 0.4s ease;
        }

        .photo-frame:hover .photo-info {
            transform: translateY(0);
        }

        .photo-info h3 {
            font-size: 1.3rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .photo-info p {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* ÂØºËà™ÊåâÈíÆ */
        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            color: #ff1744;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 15px 40px rgba(255, 105, 180, 0.4);
        }

        .nav-btn.prev {
            left: 20px;
        }

        .nav-btn.next {
            right: 20px;
        }

        /* ÊåáÁ§∫Âô® */
        .indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background: #ff1744;
            transform: scale(1.3);
            box-shadow: 0 0 20px rgba(255, 27, 68, 0.6);
        }

        /* ËøõÂ∫¶Êù° */
        .progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff6b9d, #ff1744);
            transition: width 0.1s ease;
            border-radius: 2px;
        }

        /* Ëá™Âä®Êí≠ÊîæÁä∂ÊÄÅ */
        .auto-play-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            z-index: 10;
            backdrop-filter: blur(10px);
        }

        .photo-wall {
            position: relative;
            width: 700px;
            height: 700px;
            transform-style: preserve-3d;
            animation: sophisticatedRotate 45s infinite linear;
            cursor: grab;
            filter: 
                drop-shadow(0 0 60px rgba(255, 182, 193, 0.5))
                drop-shadow(0 0 120px rgba(138, 43, 226, 0.3));
        }

        .photo-wall:active {
            cursor: grabbing;
        }

        .photo-wall.manual-control {
            animation: none;
        }

        .photo {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.7),
                0 12px 35px rgba(0, 0, 0, 0.5),
                0 4px 12px rgba(0, 0, 0, 0.4),
                inset 0 2px 0 rgba(255, 255, 255, 0.5),
                inset 0 -2px 0 rgba(0, 0, 0, 0.3),
                0 0 0 2px rgba(255, 255, 255, 0.2);
            transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
            cursor: pointer;
            border: 3px solid transparent;
            backdrop-filter: blur(15px) saturate(200%);
            transform-origin: center center;
            background: 
                linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.08) 100%),
                rgba(255, 255, 255, 0.05);
        }

        .photo::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 30%, rgba(255,182,193,0.2) 70%, rgba(138,43,226,0.2) 100%),
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.5) 0%, transparent 50%);
            pointer-events: none;
            z-index: 2;
            border-radius: 17px;
            opacity: 0.9;
        }

        .photo::after {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(45deg, 
                rgba(255,105,180,0.8) 0%, 
                rgba(138,43,226,0.6) 25%, 
                rgba(75,0,130,0.4) 50%, 
                rgba(138,43,226,0.6) 75%, 
                rgba(255,105,180,0.8) 100%);
            border-radius: 23px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.8s ease;
            filter: blur(12px);
        }

        .photo:hover {
            transform: scale(1.4) translateZ(150px) rotateY(8deg) rotateX(-8deg) !important;
            box-shadow: 
                0 50px 120px rgba(0, 0, 0, 0.9),
                0 25px 60px rgba(0, 0, 0, 0.6),
                0 0 80px rgba(255, 105, 180, 0.9),
                0 0 40px rgba(138, 43, 226, 0.7),
                0 0 120px rgba(255, 182, 193, 0.5),
                inset 0 3px 0 rgba(255, 255, 255, 0.7),
                inset 0 -3px 0 rgba(0, 0, 0, 0.4);
            z-index: 1000;
            filter: brightness(1.3) saturate(1.5) contrast(1.2);
            border: 3px solid rgba(255, 105, 180, 1);
        }

        .photo:hover::after {
            opacity: 1;
            animation: glowPulse 2s ease-in-out infinite;
        }

        .photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: all 0.5s ease;
            border-radius: 17px;
        }

        .photo:hover img {
            transform: scale(1.1);
        }

        .interaction-hint {
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 1rem;
            backdrop-filter: blur(15px);
            animation: hintFloat 8s ease-in-out infinite;
            pointer-events: none;
            font-weight: 500;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        @keyframes hintFloat {
            0%, 20%, 80%, 100% {
                opacity: 0.9;
                transform: translateX(-50%) translateY(0px);
            }
            40%, 60% {
                opacity: 0.4;
                transform: translateX(-50%) translateY(-5px);
            }
        }

        /* ÂàÜ‰∫´Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(15px);
            animation: modalFadeIn 0.4s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .share-modal-content {
            background: white;
            border-radius: 30px;
            padding: 40px;
            max-width: 550px;
            width: 95%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 30px 100px rgba(0, 0, 0, 0.6);
            animation: modalSlideIn 0.5s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .share-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .share-header h3 {
            color: #ff1744;
            font-size: 1.6rem;
            font-weight: 700;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
            padding: 5px;
        }

        .close-btn:hover {
            color: #ff1744;
        }

        .share-preview {
            text-align: center;
            margin-bottom: 30px;
        }

        .share-preview img {
            max-width: 100%;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(255, 105, 180, 0.4);
        }

        .share-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .share-action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .share-action-btn.primary {
            background: linear-gradient(135deg, #ff6b9d, #ff1744);
            color: white;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.4);
        }

        .share-action-btn.primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 105, 180, 0.6);
        }

        .share-action-btn.secondary {
            background: rgba(255, 182, 193, 0.4);
            color: #ff1744;
            border: 2px solid rgba(255, 182, 193, 0.6);
        }

        .share-action-btn.secondary:hover {
            background: rgba(255, 182, 193, 0.6);
            transform: translateY(-3px);
        }

        /* ÊµÆÂä®Áà±ÂøÉÊïàÊûú */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            font-size: 1.8rem;
            opacity: 0.8;
            animation: floatUp 8s linear infinite;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
                transform: translateY(90vh) rotate(45deg) scale(0.6);
            }
            90% {
                opacity: 0.8;
                transform: translateY(10vh) rotate(315deg) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translateY(-10vh) rotate(360deg) scale(0.6);
            }
        }

        /* È´òÁ∫ßÊóãËΩ¨Âä®Áîª */
        @keyframes sophisticatedRotate {
            0% {
                transform: rotateY(0deg) rotateX(15deg) rotateZ(0deg);
            }
            12.5% {
                transform: rotateY(45deg) rotateX(25deg) rotateZ(5deg);
            }
            25% {
                transform: rotateY(90deg) rotateX(15deg) rotateZ(-3deg);
            }
            37.5% {
                transform: rotateY(135deg) rotateX(-5deg) rotateZ(8deg);
            }
            50% {
                transform: rotateY(180deg) rotateX(-20deg) rotateZ(0deg);
            }
            62.5% {
                transform: rotateY(225deg) rotateX(-25deg) rotateZ(-5deg);
            }
            75% {
                transform: rotateY(270deg) rotateX(-15deg) rotateZ(3deg);
            }
            87.5% {
                transform: rotateY(315deg) rotateX(5deg) rotateZ(-8deg);
            }
            100% {
                transform: rotateY(360deg) rotateX(15deg) rotateZ(0deg);
            }
        }

        @keyframes glowPulse {
            0%, 100% {
                opacity: 0.8;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.15);
            }
        }

        @keyframes heartFloat {
            0% {
                transform: translateY(100vh) scale(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(1) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.4;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0.15;
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-15px);
            }
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideInOut {
            0% {
                transform: translateX(100%);
                opacity: 0;
            }
            15%, 85% {
                transform: translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .love-info-section, .photo-wall-container {
                padding: 30px 25px;
                border-radius: 25px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .couple-inputs {
                flex-direction: column;
                gap: 25px;
            }
            
            .heart-connector {
                margin-top: 0;
                font-size: 2rem;
            }
            
            .love-days .days-number {
                font-size: 2.8rem;
            }
            
            .love-display .couple-names {
                flex-direction: column;
                gap: 15px;
            }
            
            .controls {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .photo-wall-wrapper {
                height: 60vh;
            }
            
            .photo-wall {
                width: 300px;
                height: 300px;
            }
            
            .photo {
                width: 120px;
                height: 120px;
            }
        }

        @media (max-width: 480px) {
            .love-info-section, .photo-wall-container {
                padding: 25px 20px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .love-days .days-number {
                font-size: 2.5rem;
            }
            
            .photo {
                width: 100px;
                height: 100px;
            }

            .share-modal-content {
                padding: 30px 20px;
            }

            .share-actions {
                flex-direction: column;
            }
        }

        /* Âä†ËΩΩÂä®Áîª */
        .loading {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255,255,255,.4);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ÈöêËóèÂÖÉÁ¥† */
        .hidden {
            display: none !important;
        }

        /* Ê∑°ÂÖ•Âä®Áîª */
        .fade-in {
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ÊÅãÁà±‰ø°ÊÅØËæìÂÖ•ÁïåÈù¢ -->
        <div class="love-info-section" id="loveInfoSection">
            <div class="header">
                <h1>üíï Êàë‰ª¨ÁöÑÁà±ÊÉÖÂõûÂøÜÂ¢ô</h1>
                <p class="subtitle">ËÆ∞ÂΩïÊØè‰∏Ä‰∏™ÁæéÂ•ΩÁû¨Èó¥ÔºåËÆ°ÁÆóÊàë‰ª¨ÁöÑÁîúËúúÊó∂ÂÖâ</p>
            </div>
            
            <div class="love-form">
                <div class="couple-inputs">
                    <div class="input-group">
                        <label for="name1">üë´ ÊàëÁöÑÂêçÂ≠ó</label>
                        <input type="text" id="name1" placeholder="ËæìÂÖ•‰Ω†ÁöÑÂêçÂ≠ó" maxlength="10">
                    </div>
                    <div class="heart-connector">üíï</div>
                    <div class="input-group">
                        <label for="name2">üë´ TAÁöÑÂêçÂ≠ó</label>
                        <input type="text" id="name2" placeholder="ËæìÂÖ•TAÁöÑÂêçÂ≠ó" maxlength="10">
                    </div>
                </div>
                
                <div class="date-input-group">
                    <label for="startDate">üìÖ Âú®‰∏ÄËµ∑ÁöÑÊó•Êúü</label>
                    <input type="date" id="startDate" max="" required>
                </div>
                
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7,10 12,15 17,10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        <p>‰∏ä‰º†Êàë‰ª¨ÁöÑÁæéÂ•ΩÂõûÂøÜ</p>
                        <p class="upload-hint">ÊîØÊåÅ JPG„ÄÅPNG Ê†ºÂºèÔºåËá≥Â∞ë10Âº†ÁÖßÁâá</p>
                        <button type="button" id="demoBtn" class="demo-btn">üì∏ Âä†ËΩΩÊºîÁ§∫ÂõæÁâá</button>
                    </div>
                    <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
                </div>
                
                <div class="uploaded-count">
                    Â∑≤‰∏ä‰º†: <span id="imageCount">0</span> Âº†ÂõæÁâá
                </div>
                
                <button type="button" id="createWallBtn" class="create-wall-btn" disabled>
                    <span>üíñ</span>
                    <span>ÂàõÂª∫Êàë‰ª¨ÁöÑ3DÂõûÂøÜÂ¢ô</span>
                    <span>üíñ</span>
                </button>
            </div>
        </div>

        <!-- 3DÁÖßÁâáÂ¢ôÂ±ïÁ§∫ÁïåÈù¢ -->
        <div class="photo-wall-container" id="photoWallContainer" style="display: none;">
            <!-- ÊÅãÁà±‰ø°ÊÅØÊòæÁ§∫ -->
            <div class="love-display">
                <div class="couple-names">
                    <span class="name1" id="displayName1"></span>
                    <span class="love-symbol">üíï</span>
                    <span class="name2" id="displayName2"></span>
                </div>
                <div class="love-days">
                    <span class="love-text">Êàë‰ª¨Â∑≤ÁªèÁõ∏Áà±‰∫Ü</span>
                    <span class="days-number" id="daysNumber">520</span>
                    <span class="days-unit">Â§©</span>
                </div>
            </div>
            
            <!-- ÊòæÁ§∫Ê®°ÂºèÊéßÂà∂ -->
            <div class="display-mode-controls">
                <button id="mode3D" class="mode-btn active">üé≠ 3DÁÖßÁâáÂ¢ô</button>
                <button id="modeGallery" class="mode-btn">üñºÔ∏è ÁÖßÁâáÁîªÂªä</button>
            </div>
            
            <div class="controls">
                <button id="resetBtn">üîÑ ÈáçÊñ∞ÂºÄÂßã</button>
                <div class="control-group" id="control3D">
                    <label class="switch">
                        <input type="checkbox" id="autoRotate" checked>
                        <span class="slider"></span>
                        <span class="label-text">Ëá™Âä®ÊóãËΩ¨</span>
                    </label>
                    <div class="speed-control">
                        <label>3DÈÄüÂ∫¶: <input type="range" id="speedControl" min="0.5" max="3" step="0.1" value="1"></label>
                    </div>
                </div>
                <div class="control-group" id="controlGallery" style="display: none;">
                    <label class="switch">
                        <input type="checkbox" id="autoPlay" checked>
                        <span class="slider"></span>
                        <span class="label-text">Ëá™Âä®Êí≠Êîæ</span>
                    </label>
                    <div class="speed-control">
                        <label>Êí≠ÊîæÈÄüÂ∫¶: <input type="range" id="playSpeed" min="1" max="5" step="1" value="3"></label>
                    </div>
                </div>
                <button id="shareBtn" class="share-btn">üì± ÁîüÊàêÂàÜ‰∫´ÂõæÁâá</button>
            </div>
            
            <!-- 3DÁÖßÁâáÂ¢ô -->
            <div class="photo-wall-wrapper" id="photoWallWrapper">
                <div class="photo-wall" id="photoWall">
                    <!-- 3DÁÖßÁâáÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                </div>
                <div class="interaction-hint" id="interactionHint">
                    <p>üí´ ÊãñÊãΩÊóãËΩ¨ | ÁÇπÂáªÊîæÂ§ß | ÂèåÂáªÈáçÁΩÆËßÜËßí</p>
                </div>
            </div>
            
            <!-- ÁÖßÁâáÁîªÂªä -->
            <div class="photo-gallery" id="photoGallery">
                <div class="photo-slider">
                    <div class="photo-track" id="photoTrack">
                        <!-- ÁÖßÁâáÊªëÂä®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
                
                <!-- ÂØºËà™ÊåâÈíÆ -->
                <button class="nav-btn prev" id="prevBtn">‚Äπ</button>
                <button class="nav-btn next" id="nextBtn">‚Ä∫</button>
                
                <!-- ÊåáÁ§∫Âô® -->
                <div class="indicators" id="indicators"></div>
                
                <!-- ËøõÂ∫¶Êù° -->
                <div class="progress-bar" id="progressBar"></div>
                
                <!-- Ëá™Âä®Êí≠ÊîæÊåáÁ§∫Âô® -->
                <div class="auto-play-indicator" id="autoPlayIndicator">
                    <span id="autoPlayStatus">Ëá™Âä®Êí≠Êîæ‰∏≠</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂàÜ‰∫´ÂõæÁâáÁîüÊàêÁîªÂ∏É -->
    <canvas id="shareCanvas" style="display: none;"></canvas>

    <!-- ÊµÆÂä®Áà±ÂøÉÊïàÊûú -->
    <div class="floating-hearts" id="floatingHearts"></div>

    <!-- ÂàÜ‰∫´Ê®°ÊÄÅÊ°Ü -->
    <div class="share-modal" id="shareModal" style="display: none;">
        <div class="share-modal-content">
            <div class="share-header">
                <h3>üíï ÂàÜ‰∫´Êàë‰ª¨ÁöÑÁîúËúúÊó∂ÂÖâ</h3>
                <button class="close-btn" id="closeShareModal">√ó</button>
            </div>
            <div class="share-preview">
                <img id="sharePreview" alt="ÂàÜ‰∫´È¢ÑËßàÂõæ" />
            </div>
            <div class="share-actions">
                <button id="downloadShare" class="share-action-btn primary">üì• ‰∏ãËΩΩÂõæÁâá</button>
                <button id="copyShare" class="share-action-btn secondary">üìã Â§çÂà∂ÂõæÁâá</button>
            </div>
        </div>
    </div>

    <script>
        class RomanticPhotoWall {
            constructor() {
                this.images = [];
                this.isDragging = false;
                this.previousMousePosition = { x: 0, y: 0 };
                this.rotation = { x: 0, y: 0 };
                this.autoRotateEnabled = true;
                this.loveStartDate = null;
                this.coupleName1 = '';
                this.coupleName2 = '';
                
                this.initializeElements();
                this.bindEvents();
                this.setupDateConstraints();
                this.startFloatingHearts();
            }

            initializeElements() {
                // ÁïåÈù¢ÂÖÉÁ¥†
                this.loveInfoSection = document.getElementById('loveInfoSection');
                this.photoWallContainer = document.getElementById('photoWallContainer');
                
                // ËæìÂÖ•ÂÖÉÁ¥†
                this.name1Input = document.getElementById('name1');
                this.name2Input = document.getElementById('name2');
                this.startDateInput = document.getElementById('startDate');
                this.uploadArea = document.getElementById('uploadArea');
                this.fileInput = document.getElementById('fileInput');
                this.imageCount = document.getElementById('imageCount');
                this.createWallBtn = document.getElementById('createWallBtn');
                this.demoBtn = document.getElementById('demoBtn');
                
                // ÊòæÁ§∫ÂÖÉÁ¥†
                this.displayName1 = document.getElementById('displayName1');
                this.displayName2 = document.getElementById('displayName2');
                this.daysNumber = document.getElementById('daysNumber');
                this.photoWall = document.getElementById('photoWall');
                this.interactionHint = document.getElementById('interactionHint');
                
                // ÊéßÂà∂ÂÖÉÁ¥†
                this.resetBtn = document.getElementById('resetBtn');
                this.shareBtn = document.getElementById('shareBtn');
                this.autoRotateCheckbox = document.getElementById('autoRotate');
                this.speedControl = document.getElementById('speedControl');
                
                // ÊòæÁ§∫Ê®°ÂºèÂÖÉÁ¥†
                this.mode3DBtn = document.getElementById('mode3D');
                this.modeGalleryBtn = document.getElementById('modeGallery');
                this.photoWallWrapper = document.getElementById('photoWallWrapper');
                this.photoGallery = document.getElementById('photoGallery');
                this.control3D = document.getElementById('control3D');
                this.controlGallery = document.getElementById('controlGallery');
                
                // ÁîªÂªäÊéßÂà∂ÂÖÉÁ¥†
                this.autoPlayCheckbox = document.getElementById('autoPlay');
                this.playSpeedControl = document.getElementById('playSpeed');
                this.photoTrack = document.getElementById('photoTrack');
                this.indicators = document.getElementById('indicators');
                this.progressBar = document.getElementById('progressBar');
                this.autoPlayIndicator = document.getElementById('autoPlayIndicator');
                this.autoPlayStatus = document.getElementById('autoPlayStatus');
                this.prevBtn = document.getElementById('prevBtn');
                this.nextBtn = document.getElementById('nextBtn');
                
                // ÁîªÂªäÁä∂ÊÄÅ
                this.currentSlide = 0;
                this.isAutoPlaying = true;
                this.autoPlaySpeed = 3000;
                this.autoPlayTimer = null;
                this.progressTimer = null;
                
                // ÂàÜ‰∫´Áõ∏ÂÖ≥ÂÖÉÁ¥†
                this.shareCanvas = document.getElementById('shareCanvas');
                this.shareModal = document.getElementById('shareModal');
                this.sharePreview = document.getElementById('sharePreview');
                this.closeShareModal = document.getElementById('closeShareModal');
                this.downloadShare = document.getElementById('downloadShare');
                this.copyShare = document.getElementById('copyShare');
                
                // ÊµÆÂä®Áà±ÂøÉÂÆπÂô®
                this.floatingHearts = document.getElementById('floatingHearts');
            }

            bindEvents() {
                // ÁÖßÁâá‰∏ä‰º†‰∫ã‰ª∂
                this.uploadArea.addEventListener('click', () => this.fileInput.click());
                this.fileInput.addEventListener('change', (e) => this.handleFileSelect(e));
                
                // ÊãñÊãΩ‰∏ä‰º†‰∫ã‰ª∂
                this.uploadArea.addEventListener('dragover', (e) => this.handleDragOver(e));
                this.uploadArea.addEventListener('dragleave', (e) => this.handleDragLeave(e));
                this.uploadArea.addEventListener('drop', (e) => this.handleDrop(e));
                
                // ÂàõÂª∫ÁÖßÁâáÂ¢ôÊåâÈíÆ
                this.createWallBtn.addEventListener('click', () => this.createPhotoWall());
                
                // ÊºîÁ§∫ÊåâÈíÆ
                this.demoBtn.addEventListener('click', () => this.loadDemoImages());
                
                // ËæìÂÖ•Ê°ÜÂèòÂåñ‰∫ã‰ª∂
                [this.name1Input, this.name2Input, this.startDateInput].forEach(input => {
                    input.addEventListener('input', () => this.validateInputs());
                    input.addEventListener('focus', () => this.addSparkleEffect(input));
                    input.addEventListener('blur', () => this.removeSparkleEffect(input));
                });
                
                // 3D‰∫§‰∫í‰∫ã‰ª∂
                this.photoWall.addEventListener('mousedown', (e) => this.handleMouseDown(e));
                document.addEventListener('mousemove', (e) => this.handleMouseMove(e));
                document.addEventListener('mouseup', () => this.handleMouseUp());
                
                // Ëß¶Êë∏‰∫ã‰ª∂
                this.photoWall.addEventListener('touchstart', (e) => this.handleTouchStart(e));
                this.photoWall.addEventListener('touchmove', (e) => this.handleTouchMove(e));
                this.photoWall.addEventListener('touchend', () => this.handleTouchEnd());
                
                // ÊéßÂà∂ÊåâÈíÆ‰∫ã‰ª∂
                this.resetBtn.addEventListener('click', () => this.resetToStart());
                this.shareBtn.addEventListener('click', () => this.generateShareImage());
                this.autoRotateCheckbox.addEventListener('change', (e) => this.toggleAutoRotate(e.target.checked));
                this.speedControl.addEventListener('input', (e) => this.updateRotationSpeed(e.target.value));
                
                // ÂèåÂáªÈáçÁΩÆËßÜËßí
                this.photoWall.addEventListener('dblclick', () => this.resetViewAngle());
                
                // ÊòæÁ§∫Ê®°ÂºèÂàáÊç¢
                this.mode3DBtn.addEventListener('click', () => this.switchTo3D());
                this.modeGalleryBtn.addEventListener('click', () => this.switchToGallery());
                
                // ÁîªÂªäÊéßÂà∂‰∫ã‰ª∂
                this.autoPlayCheckbox.addEventListener('change', (e) => this.toggleGalleryAutoPlay(e.target.checked));
                this.playSpeedControl.addEventListener('input', (e) => this.updatePlaySpeed(e.target.value));
                this.prevBtn.addEventListener('click', () => this.goToPrevious());
                this.nextBtn.addEventListener('click', () => this.goToNext());
                
                // ÈîÆÁõòÊéßÂà∂
                document.addEventListener('keydown', (e) => {
                    if (this.photoWallContainer.style.display === 'none') return;
                    
                    if (this.photoGallery.classList.contains('active')) {
                        if (e.key === 'ArrowLeft') this.goToPrevious();
                        if (e.key === 'ArrowRight') this.goToNext();
                        if (e.key === ' ') {
                            e.preventDefault();
                            this.toggleGalleryAutoPlay(!this.isAutoPlaying);
                        }
                    }
                });
                
                // Ëß¶Êë∏ÊªëÂä®ÊîØÊåÅ
                let startX = 0;
                let startY = 0;
                let isDragging = false;

                this.photoTrack.addEventListener('touchstart', (e) => {
                    startX = e.touches[0].clientX;
                    startY = e.touches[0].clientY;
                    isDragging = true;
                });

                this.photoTrack.addEventListener('touchmove', (e) => {
                    if (!isDragging) return;
                    e.preventDefault();
                });

                this.photoTrack.addEventListener('touchend', (e) => {
                    if (!isDragging) return;
                    
                    const endX = e.changedTouches[0].clientX;
                    const endY = e.changedTouches[0].clientY;
                    const deltaX = endX - startX;
                    const deltaY = endY - startY;
                    
                    if (Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 50) {
                        if (deltaX > 0) {
                            this.goToPrevious();
                        } else {
                            this.goToNext();
                        }
                    }
                    
                    isDragging = false;
                });
                
                // ÂàÜ‰∫´Ê®°ÊÄÅÊ°Ü‰∫ã‰ª∂
                this.closeShareModal.addEventListener('click', () => this.closeShare());
                this.downloadShare.addEventListener('click', () => this.downloadShareImage());
                this.copyShare.addEventListener('click', () => this.copyShareImage());
                this.shareModal.addEventListener('click', (e) => {
                    if (e.target === this.shareModal) this.closeShare();
                });
                
                // ÂõûËΩ¶ÈîÆÂø´Êç∑Êìç‰Ωú
                document.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && this.loveInfoSection.style.display !== 'none') {
                        this.createPhotoWall();
                    }
                });
            }

            setupDateConstraints() {
                const today = new Date().toISOString().split('T')[0];
                this.startDateInput.setAttribute('max', today);
                
                // ËÆæÁΩÆÈªòËÆ§Êó•Êúü‰∏∫‰∏ÄÂπ¥Ââç
                const oneYearAgo = new Date();
                oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
                this.startDateInput.value = oneYearAgo.toISOString().split('T')[0];
            }

            validateInputs() {
                const name1 = this.name1Input.value.trim();
                const name2 = this.name2Input.value.trim();
                const startDate = this.startDateInput.value;
                const hasImages = this.images.length >= 10;
                
                const isValid = name1 && name2 && startDate && hasImages;
                this.createWallBtn.disabled = !isValid;
                
                if (isValid) {
                    this.createWallBtn.classList.add('ready');
                } else {
                    this.createWallBtn.classList.remove('ready');
                }
            }

            // Êñá‰ª∂Â§ÑÁêÜÊñπÊ≥ï
            handleFileSelect(event) {
                const files = Array.from(event.target.files);
                this.processFiles(files);
            }

            handleDragOver(event) {
                event.preventDefault();
                this.uploadArea.classList.add('dragover');
            }

            handleDragLeave(event) {
                event.preventDefault();
                this.uploadArea.classList.remove('dragover');
            }

            handleDrop(event) {
                event.preventDefault();
                this.uploadArea.classList.remove('dragover');
                const files = Array.from(event.dataTransfer.files);
                this.processFiles(files);
            }

            async processFiles(files) {
                const imageFiles = files.filter(file => file.type.startsWith('image/'));
                
                if (imageFiles.length === 0) {
                    this.showNotification('ËØ∑ÈÄâÊã©ÂõæÁâáÊñá‰ª∂ÔºÅ', 'warning');
                    return;
                }

                if (this.images.length + imageFiles.length > 100) {
                    this.showNotification('ÊúÄÂ§öÂè™ËÉΩ‰∏ä‰º†100Âº†ÂõæÁâáÔºÅ', 'warning');
                    return;
                }

                this.showLoading();

                for (const file of imageFiles) {
                    try {
                        const imageData = await this.loadImage(file);
                        this.images.push(imageData);
                        this.updateImageCount();
                    } catch (error) {
                        console.error('Âä†ËΩΩÂõæÁâáÂ§±Ë¥•:', error);
                    }
                }

                this.hideLoading();
                this.validateInputs();

                if (this.images.length >= 10) {
                    this.showNotification(`Â§™Ê£í‰∫ÜÔºÅÂ∑≤‰∏ä‰º†${this.images.length}Âº†ÁÖßÁâá üíï`, 'success');
                } else {
                    this.showNotification(`ËøòÈúÄË¶Å${10 - this.images.length}Âº†ÁÖßÁâáÊâçËÉΩÂàõÂª∫ÁÖßÁâáÂ¢ô`, 'info');
                }
            }

            loadImage(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            resolve({
                                src: e.target.result,
                                name: file.name,
                                width: img.width,
                                height: img.height
                            });
                        };
                        img.onerror = reject;
                        img.src = e.target.result;
                    };
                    reader.onerror = reject;
                    reader.readAsDataURL(file);
                });
            }

            showLoading() {
                this.uploadArea.querySelector('.upload-content').innerHTML = `
                    <div class="loading"></div>
                    <p>Ê≠£Âú®Âä†ËΩΩÂõæÁâá...</p>
                `;
            }

            hideLoading() {
                this.uploadArea.querySelector('.upload-content').innerHTML = `
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7,10 12,15 17,10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    <p>‰∏ä‰º†Êàë‰ª¨ÁöÑÁæéÂ•ΩÂõûÂøÜ</p>
                    <p class="upload-hint">ÊîØÊåÅ JPG„ÄÅPNG Ê†ºÂºèÔºåËá≥Â∞ë10Âº†ÁÖßÁâá</p>
                    <button type="button" id="demoBtn" class="demo-btn">üì∏ Âä†ËΩΩÊºîÁ§∫ÂõæÁâá</button>
                `;
                
                // ÈáçÊñ∞ÁªëÂÆöÊºîÁ§∫ÊåâÈíÆ‰∫ã‰ª∂
                const newDemoBtn = document.getElementById('demoBtn');
                if (newDemoBtn) {
                    newDemoBtn.addEventListener('click', () => this.loadDemoImages());
                }
            }

            updateImageCount() {
                this.imageCount.textContent = this.images.length;
            }

            async loadDemoImages() {
                this.showNotification('Ê≠£Âú®ÁîüÊàêÊºîÁ§∫ÂõæÁâá... üé®', 'info');
                
                const colors = [
                    ['#FF6B6B', '#4ECDC4'], ['#45B7D1', '#96CEB4'], ['#FFECD2', '#FCB69F'],
                    ['#A8EDEA', '#FED6E3'], ['#D299C2', '#FEF9D7'], ['#89F7FE', '#66A6FF'],
                    ['#FDA085', '#F6D365'], ['#F093FB', '#F5576C'], ['#4FACFE', '#00F2FE'],
                    ['#43E97B', '#38F9D7'], ['#FA709A', '#FEE140'], ['#A770EF', '#CF8BF3'],
                    ['#FEB692', '#EA5455'], ['#667eea', '#764ba2'], ['#f093fb', '#f5576c'],
                    ['#4facfe', '#00f2fe'], ['#43e97b', '#38f9d7'], ['#fa709a', '#fee140']
                ];

                this.images = [];
                
                for (let i = 0; i < Math.min(colors.length, 18); i++) {
                    const canvas = document.createElement('canvas');
                    canvas.width = 300;
                    canvas.height = 300;
                    const ctx = canvas.getContext('2d');
                    
                    // ÂàõÂª∫Ê∏êÂèòËÉåÊôØ
                    const gradient = ctx.createLinearGradient(0, 0, 300, 300);
                    gradient.addColorStop(0, colors[i][0]);
                    gradient.addColorStop(1, colors[i][1]);
                    
                    ctx.fillStyle = gradient;
                    ctx.fillRect(0, 0, 300, 300);
                    
                    // Ê∑ªÂä†Ë£ÖÈ•∞ÂÖÉÁ¥†
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                    ctx.beginPath();
                    ctx.arc(150, 150, 80, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Ê∑ªÂä†ÂøÉÂΩ¢ÊàñÂÖ∂‰ªñÂõæÊ°à
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                    ctx.font = '48px Arial';
                    ctx.textAlign = 'center';
                    const symbols = ['üíï', 'üíñ', 'üíó', 'üíò', 'üíù', 'üíû', 'üíü', '‚ù§Ô∏è', 'üß°', 'üíõ', 'üíö', 'üíô', 'üíú', 'üñ§', 'ü§ç', 'ü§é', '‚ù£Ô∏è', 'üíã'];
                    ctx.fillText(symbols[i % symbols.length], 150, 170);
                    
                    const dataURL = canvas.toDataURL('image/png');
                    this.images.push({
                        src: dataURL,
                        name: `demo-${i + 1}.png`,
                        width: 300,
                        height: 300
                    });
                }
                
                this.updateImageCount();
                this.validateInputs();
                this.showNotification('ÊºîÁ§∫ÂõæÁâáÂä†ËΩΩÂÆåÊàêÔºÅ ‚ú®', 'success');
            }

            createPhotoWall() {
                const name1 = this.name1Input.value.trim();
                const name2 = this.name2Input.value.trim();
                const startDate = this.startDateInput.value;

                if (!name1 || !name2) {
                    this.showNotification('ËØ∑ËæìÂÖ•‰∏§‰∏™‰∫∫ÁöÑÂêçÂ≠ó üíï', 'warning');
                    return;
                }

                if (!startDate) {
                    this.showNotification('ËØ∑ÈÄâÊã©Âú®‰∏ÄËµ∑ÁöÑÊó•Êúü üìÖ', 'warning');
                    return;
                }

                if (this.images.length < 10) {
                    this.showNotification('Ëá≥Â∞ëÈúÄË¶Å10Âº†ÁÖßÁâáÊâçËÉΩÂàõÂª∫ÁÖßÁâáÂ¢ô', 'warning');
                    return;
                }

                // ‰øùÂ≠òÊÅãÁà±‰ø°ÊÅØ
                this.coupleName1 = name1;
                this.coupleName2 = name2;
                this.loveStartDate = new Date(startDate);

                // ÊòæÁ§∫Âä†ËΩΩ
                this.createWallBtn.innerHTML = `
                    <div class="loading"></div>
                    <span>Ê≠£Âú®ÂàõÂª∫Êàë‰ª¨ÁöÑÂõûÂøÜÂ¢ô...</span>
                `;
                this.createWallBtn.disabled = true;

                // Âª∂ËøüÂàáÊç¢ÁïåÈù¢
                setTimeout(() => {
                    this.showPhotoWall();
                }, 1500);
            }

            showPhotoWall() {
                // Êõ¥Êñ∞ÊÅãÁà±‰ø°ÊÅØÊòæÁ§∫
                this.displayName1.textContent = this.coupleName1;
                this.displayName2.textContent = this.coupleName2;
                
                // ËÆ°ÁÆóÂπ∂Âä®ÁîªÊòæÁ§∫ÊÅãÁà±Â§©Êï∞
                const today = new Date();
                const timeDiff = today.getTime() - this.loveStartDate.getTime();
                const daysDiff = Math.floor(timeDiff / (1000 * 3600 * 24));
                this.animateNumber(this.daysNumber, 0, daysDiff, 2000);
                
                // ÁîüÊàêÁÖßÁâáÂ±ïÁ§∫
                this.generatePhotoWall();
                this.buildGallery();
                
                // ÂàáÊç¢ÁïåÈù¢
                this.loveInfoSection.style.display = 'none';
                this.photoWallContainer.style.display = 'block';
                this.photoWallContainer.classList.add('fade-in');
                
                // ÂàõÂª∫Êµ™Êº´ÁâπÊïà
                this.createRomanticEffects();
                
                // ÊòæÁ§∫ÊàêÂäüÈÄöÁü•
                this.showNotification(`üéâ Êàë‰ª¨ÁöÑÂõûÂøÜÂ¢ôÂàõÂª∫ÊàêÂäüÔºÅÁõ∏Áà±‰∫Ü ${daysDiff} Â§©ÔºÅ`, 'success');
                
                // ÊªöÂä®Âà∞ÁÖßÁâáÂ¢ô
                this.photoWallContainer.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }

            animateNumber(element, start, end, duration) {
                const startTime = performance.now();
                const range = end - start;

                const animate = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                    const currentValue = Math.floor(start + (range * easeOutQuart));
                    
                    element.textContent = currentValue;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    }
                };
                
                requestAnimationFrame(animate);
            }

            // ÊòæÁ§∫Ê®°ÂºèÂàáÊç¢
            switchTo3D() {
                this.mode3DBtn.classList.add('active');
                this.modeGalleryBtn.classList.remove('active');
                this.photoWallWrapper.style.display = 'flex';
                this.photoGallery.classList.remove('active');
                this.control3D.style.display = 'flex';
                this.controlGallery.style.display = 'none';
                this.stopGalleryAutoPlay();
                this.showNotification('Â∑≤ÂàáÊç¢Âà∞3DÁÖßÁâáÂ¢ôÊ®°Âºè üé≠', 'info');
            }

            switchToGallery() {
                this.mode3DBtn.classList.remove('active');
                this.modeGalleryBtn.classList.add('active');
                this.photoWallWrapper.style.display = 'none';
                this.photoGallery.classList.add('active');
                this.control3D.style.display = 'none';
                this.controlGallery.style.display = 'flex';
                this.buildIndicators();
                if (this.isAutoPlaying) {
                    this.startGalleryAutoPlay();
                }
                this.showNotification('Â∑≤ÂàáÊç¢Âà∞ÁÖßÁâáÁîªÂªäÊ®°Âºè üñºÔ∏è', 'info');
            }

            generatePhotoWall() {
                this.photoWall.innerHTML = '';
                const imageCount = this.images.length;
                
                let layoutType = '';
                if (imageCount <= 12) layoutType = 'Á´ãÊñπ‰ΩìÂ∏ÉÂ±Ä';
                else if (imageCount <= 30) layoutType = 'Â§öÂ±ÇÁ´ãÊñπ‰ΩìÂ∏ÉÂ±Ä';
                else if (imageCount <= 60) layoutType = 'Ëû∫ÊóãÂúÜÊü±Â∏ÉÂ±Ä';
                else layoutType = 'ÊòüÁ≥ªÂ∏ÉÂ±Ä';
                
                this.showNotification(`Ê≠£Âú®ÁîüÊàê${layoutType} - ${imageCount}Âº†ÁÖßÁâá ‚ú®`, 'info');
                
                const layouts = this.calculate3DLayouts(imageCount);
                
                const batchSize = 10;
                let currentBatch = 0;
                
                const loadBatch = () => {
                    const start = currentBatch * batchSize;
                    const end = Math.min(start + batchSize, imageCount);
                    
                    for (let i = start; i < end; i++) {
                        if (layouts[i]) {
                            const photoElement = this.createPhotoElement(this.images[i], layouts[i]);
                            this.photoWall.appendChild(photoElement);
                        }
                    }
                    
                    currentBatch++;
                    if (currentBatch * batchSize < imageCount) {
                        setTimeout(loadBatch, 100);
                    }
                };
                
                loadBatch();
                
                setTimeout(() => {
                    this.showNotification(`${layoutType}ÁîüÊàêÂÆåÊàêÔºÅüéâ`, 'success');
                }, 2000);
            }

            calculate3DLayouts(count) {
                const layouts = [];
                
                if (count <= 12) {
                    // Á´ãÊñπ‰ΩìÂ∏ÉÂ±Ä
                    for (let i = 0; i < count; i++) {
                        const angle = (i / count) * 2 * Math.PI;
                        const x = Math.cos(angle) * 250;
                        const z = Math.sin(angle) * 250;
                        const y = (Math.sin(i * 0.8) * 120);
                        
                        layouts.push({
                            transform: `translate3d(${x}px, ${y}px, ${z}px) rotateY(${angle * 180 / Math.PI}deg)`,
                            delay: i * 0.1
                        });
                    }
                } else {
                    // ÁêÉÂΩ¢Â∏ÉÂ±Ä
                    for (let i = 0; i < count; i++) {
                        const phi = Math.acos(1 - 2 * i / count);
                        const theta = Math.PI * (1 + Math.sqrt(5)) * i;
                        const radius = 300;
                        
                        const x = radius * Math.sin(phi) * Math.cos(theta);
                        const y = radius * Math.cos(phi);
                        const z = radius * Math.sin(phi) * Math.sin(theta);
                        
                        layouts.push({
                            transform: `translate3d(${x}px, ${y}px, ${z}px) rotateY(${theta * 180 / Math.PI}deg)`,
                            delay: i * 0.05
                        });
                    }
                }
                
                return layouts;
            }

            createPhotoElement(image, layout) {
                const photo = document.createElement('div');
                photo.className = 'photo';
                photo.style.transform = layout.transform;
                photo.style.opacity = '0';
                
                const maxDelay = Math.min((layout.delay || 0), 2);
                photo.style.animation = `float 6s ease-in-out infinite ${maxDelay}s`;
                
                const img = document.createElement('img');
                img.src = image.src;
                img.alt = image.name;
                img.loading = 'lazy';
                
                setTimeout(() => {
                    photo.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                    photo.style.opacity = '1';
                }, maxDelay * 200);
                
                photo.addEventListener('click', () => this.showImageModal(image));
                
                photo.appendChild(img);
                return photo;
            }

            showImageModal(image) {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.9);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                    cursor: pointer;
                `;
                
                const img = document.createElement('img');
                img.src = image.src;
                img.style.cssText = `
                    max-width: 90%;
                    max-height: 90%;
                    object-fit: contain;
                    border-radius: 10px;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
                `;
                
                modal.appendChild(img);
                document.body.appendChild(modal);
                
                modal.addEventListener('click', () => {
                    document.body.removeChild(modal);
                });
            }

            // 3D‰∫§‰∫íÊñπÊ≥ï
            handleMouseDown(event) {
                this.isDragging = true;
                this.previousMousePosition = {
                    x: event.clientX,
                    y: event.clientY
                };
                this.photoWall.classList.add('manual-control');
            }

            handleMouseMove(event) {
                if (!this.isDragging) return;
                
                const deltaX = event.clientX - this.previousMousePosition.x;
                const deltaY = event.clientY - this.previousMousePosition.y;
                
                this.rotation.y += deltaX * 0.5;
                this.rotation.x -= deltaY * 0.5;
                
                this.updatePhotoWallTransform();
                
                this.previousMousePosition = {
                    x: event.clientX,
                    y: event.clientY
                };
            }

            handleMouseUp() {
                this.isDragging = false;
                if (this.autoRotateEnabled) {
                    this.photoWall.classList.remove('manual-control');
                }
            }

            handleTouchStart(event) {
                event.preventDefault();
                if (event.touches.length === 1) {
                    this.isDragging = true;
                    this.previousMousePosition = {
                        x: event.touches[0].clientX,
                        y: event.touches[0].clientY
                    };
                    this.photoWall.classList.add('manual-control');
                }
            }

            handleTouchMove(event) {
                event.preventDefault();
                if (!this.isDragging || event.touches.length !== 1) return;
                
                const deltaX = event.touches[0].clientX - this.previousMousePosition.x;
                const deltaY = event.touches[0].clientY - this.previousMousePosition.y;
                
                this.rotation.y += deltaX * 0.5;
                this.rotation.x -= deltaY * 0.5;
                
                this.updatePhotoWallTransform();
                
                this.previousMousePosition = {
                    x: event.touches[0].clientX,
                    y: event.touches[0].clientY
                };
            }

            handleTouchEnd() {
                this.isDragging = false;
                if (this.autoRotateEnabled) {
                    this.photoWall.classList.remove('manual-control');
                }
            }

            updatePhotoWallTransform() {
                this.photoWall.style.transform = `rotateX(${this.rotation.x}deg) rotateY(${this.rotation.y}deg)`;
            }

            toggleAutoRotate(enabled) {
                this.autoRotateEnabled = enabled;
                if (enabled) {
                    this.photoWall.classList.remove('manual-control');
                    this.photoWall.style.transform = '';
                    this.rotation = { x: 0, y: 0 };
                } else {
                    this.photoWall.classList.add('manual-control');
                }
            }

            updateRotationSpeed(speed) {
                const duration = 45 / parseFloat(speed);
                this.photoWall.style.animationDuration = `${duration}s`;
            }

            resetViewAngle() {
                this.rotation = { x: 0, y: 0 };
                this.photoWall.style.transition = 'transform 1s ease';
                this.photoWall.style.transform = '';
                
                setTimeout(() => {
                    this.photoWall.style.transition = '';
                }, 1000);
                
                this.showNotification('ËßÜËßíÂ∑≤ÈáçÁΩÆ üéØ', 'info');
            }

            // ÂàÜ‰∫´ÂäüËÉΩ
            async generateShareImage() {
                this.showNotification('Ê≠£Âú®ÁîüÊàêÂàÜ‰∫´ÂõæÁâá... üé®', 'info');
                
                const canvas = this.shareCanvas;
                const ctx = canvas.getContext('2d');
                
                canvas.width = 800;
                canvas.height = 1200;
                
                // ÂàõÂª∫Ê∏êÂèòËÉåÊôØ
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#ff9a9e');
                gradient.addColorStop(0.25, '#fecfef');
                gradient.addColorStop(0.75, '#fecfef');
                gradient.addColorStop(1, '#ff9a9e');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Ê∑ªÂä†Ë£ÖÈ•∞ÂúÜÂúà
                ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
                for (let i = 0; i < 15; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height;
                    const radius = Math.random() * 40 + 20;
                    ctx.beginPath();
                    ctx.arc(x, y, radius, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                // Ê∑ªÂä†Ê†áÈ¢ò
                ctx.fillStyle = '#ff1744';
                ctx.font = 'bold 52px sans-serif';
                ctx.textAlign = 'center';
                ctx.shadowColor = 'rgba(255, 105, 180, 0.5)';
                ctx.shadowBlur = 10;
                ctx.fillText('üíï Êàë‰ª¨ÁöÑÁà±ÊÉÖÂõûÂøÜÂ¢ô', canvas.width / 2, 120);
                
                // ÈáçÁΩÆÈò¥ÂΩ±
                ctx.shadowColor = 'transparent';
                ctx.shadowBlur = 0;
                
                // Ê∑ªÂä†ÊÉÖ‰æ£ÂêçÂ≠ó
                ctx.font = 'bold 40px sans-serif';
                ctx.fillStyle = '#ff6b9d';
                ctx.fillText(`${this.coupleName1} & ${this.coupleName2}`, canvas.width / 2, 200);
                
                // Ê∑ªÂä†Â§©Êï∞
                const today = new Date();
                const timeDiff = today.getTime() - this.loveStartDate.getTime();
                const daysDiff = Math.floor(timeDiff / (1000 * 3600 * 24));
                
                ctx.font = 'bold 80px sans-serif';
                ctx.fillStyle = '#ff1744';
                ctx.fillText(daysDiff, canvas.width / 2, 320);
                
                ctx.font = 'bold 36px sans-serif';
                ctx.fillStyle = '#666';
                ctx.fillText('Â§©', canvas.width / 2 + 90, 320);
                ctx.fillText('Êàë‰ª¨Â∑≤ÁªèÁõ∏Áà±‰∫Ü', canvas.width / 2 - 140, 270);
                
                // Ê∑ªÂä†ÁÖßÁâáÁΩëÊ†ºÔºàÁÆÄÂåñÁâàÔºâ
                const photoSize = 100;
                const spacing = 120;
                const cols = 6;
                const rows = 5;
                const startX = (canvas.width - (cols * spacing)) / 2 + spacing / 2;
                const startY = 420;
                
                // ÁªòÂà∂ÁÖßÁâáÂç†‰ΩçÁ¨¶
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.strokeStyle = '#ff69b4';
                ctx.lineWidth = 3;
                
                for (let row = 0; row < rows; row++) {
                    for (let col = 0; col < cols; col++) {
                        const index = row * cols + col;
                        if (index >= Math.min(this.images.length, 30)) break;
                        
                        const x = startX + col * spacing;
                        const y = startY + row * spacing;
                        
                        // ÁªòÂà∂ÂúÜËßíÁü©ÂΩ¢
                        const radius = 15;
                        ctx.beginPath();
                        ctx.roundRect(x - photoSize/2, y - photoSize/2, photoSize, photoSize, radius);
                        ctx.fill();
                        ctx.stroke();
                        
                        // Ê∑ªÂä†Áà±ÂøÉÂõæÊ†á
                        ctx.fillStyle = '#ff69b4';
                        ctx.font = '36px sans-serif';
                        ctx.fillText('üíï', x, y + 10);
                        ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                    }
                }
                
                // Ê∑ªÂä†Â∫ïÈÉ®ÊñáÂ≠ó
                ctx.fillStyle = '#777';
                ctx.font = 'bold 28px sans-serif';
                ctx.fillText('ÊØè‰∏ÄÂº†ÁÖßÁâáÈÉΩÊòØÊàë‰ª¨ÁöÑÁæéÂ•ΩÂõûÂøÜ üíï', canvas.width / 2, canvas.height - 120);
                
                // Ê∑ªÂä†Êó•Êúü
                const dateStr = new Date().toLocaleDateString('zh-CN');
                ctx.font = '24px sans-serif';
                ctx.fillStyle = '#999';
                ctx.fillText(`ÁîüÊàê‰∫é ${dateStr}`, canvas.width / 2, canvas.height - 60);
                
                // ÊòæÁ§∫ÂàÜ‰∫´È¢ÑËßà
                const dataURL = canvas.toDataURL('image/png');
                this.sharePreview.src = dataURL;
                this.shareModal.style.display = 'flex';
                
                this.showNotification('ÂàÜ‰∫´ÂõæÁâáÁîüÊàêÂÆåÊàêÔºÅüíï', 'success');
            }

            closeShare() {
                this.shareModal.style.display = 'none';
            }

            downloadShareImage() {
                const dataURL = this.sharePreview.src;
                const link = document.createElement('a');
                link.download = `Êàë‰ª¨ÁöÑÁà±ÊÉÖÂõûÂøÜÂ¢ô_${this.coupleName1}&${this.coupleName2}.png`;
                link.href = dataURL;
                link.click();
                
                this.showNotification('ÂõæÁâá‰∏ãËΩΩÊàêÂäüÔºÅüì•', 'success');
            }

            async copyShareImage() {
                try {
                    const canvas = this.shareCanvas;
                    canvas.toBlob(async (blob) => {
                        try {
                            await navigator.clipboard.write([
                                new ClipboardItem({ 'image/png': blob })
                            ]);
                            this.showNotification('ÂõæÁâáÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅüìã', 'success');
                        } catch (error) {
                            this.fallbackCopy();
                        }
                    });
                } catch (error) {
                    this.fallbackCopy();
                }
            }

            fallbackCopy() {
                const shareText = `üíï ${this.coupleName1} & ${this.coupleName2} ÁöÑÁà±ÊÉÖÂõûÂøÜÂ¢ô\nÊàë‰ª¨Â∑≤ÁªèÁõ∏Áà±‰∫Ü ${this.daysNumber.textContent} Â§©ÔºÅ\nÊØè‰∏ÄÂ§©ÈÉΩÂÖÖÊª°Áà±ÊÑè~ üåπ`;
                
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(shareText).then(() => {
                        this.showNotification('ÊñáÊú¨Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅüìã', 'success');
                    }).catch(() => {
                        this.showNotification('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Êà™ÂõæÂàÜ‰∫´', 'warning');
                    });
                } else {
                    this.showNotification('Â§çÂà∂Â§±Ë¥•ÔºåËØ∑ÊâãÂä®Êà™ÂõæÂàÜ‰∫´', 'warning');
                }
            }

            // ÈáçÁΩÆÂäüËÉΩ
            resetToStart() {
                this.images = [];
                this.updateImageCount();
                this.photoWallContainer.style.display = 'none';
                this.loveInfoSection.style.display = 'block';
                this.loveInfoSection.classList.add('fade-in');
                
                // ÈáçÁΩÆËæìÂÖ•
                this.name1Input.value = '';
                this.name2Input.value = '';
                this.fileInput.value = '';
                
                // ÈáçÁΩÆÊó•Êúü
                const oneYearAgo = new Date();
                oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
                this.startDateInput.value = oneYearAgo.toISOString().split('T')[0];
                
                // ÈáçÁΩÆÊòæÁ§∫Áä∂ÊÄÅ
                this.rotation = { x: 0, y: 0 };
                this.photoWall.style.transform = '';
                this.photoWall.classList.remove('manual-control');
                this.currentSlide = 0;
                this.stopGalleryAutoPlay();
                
                // ÈáçÁΩÆÂà∞3DÊ®°Âºè
                this.switchTo3D();
                
                // ÈáçÁΩÆÊåâÈíÆÁä∂ÊÄÅ
                this.createWallBtn.innerHTML = `
                    <span>üíñ</span>
                    <span>ÂàõÂª∫Êàë‰ª¨ÁöÑ3DÂõûÂøÜÂ¢ô</span>
                    <span>üíñ</span>
                `;
                this.createWallBtn.disabled = true;
                
                this.validateInputs();
                this.showNotification('Â∑≤ÈáçÁΩÆÔºåÂèØ‰ª•ÈáçÊñ∞ÂºÄÂßãÂï¶ üîÑ', 'info');
                
                // ÈáçÁΩÆÁîªÂªäÊéßÂà∂
                this.autoPlayCheckbox.checked = true;
                this.playSpeedControl.value = 3;
                this.isAutoPlaying = true;
                this.autoPlaySpeed = 3000;
                
                // ÊªöÂä®Âà∞È°∂ÈÉ®
                this.loveInfoSection.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }

            // Êµ™Êº´ÁâπÊïà
            createRomanticEffects() {
                this.createHeartParticles();
                this.createGlowEffect();
            }

            createHeartParticles() {
                const container = document.querySelector('.photo-wall-wrapper');
                
                setInterval(() => {
                    if (this.photoWallContainer.style.display === 'none') return;
                    
                    const heart = document.createElement('div');
                    heart.innerHTML = '‚ô•';
                    heart.style.cssText = `
                        position: absolute;
                        color: rgba(255, 182, 193, 0.6);
                        font-size: ${Math.random() * 20 + 10}px;
                        left: ${Math.random() * 100}%;
                        bottom: -50px;
                        pointer-events: none;
                        z-index: 0;
                        animation: heartFloat ${Math.random() * 3 + 4}s linear forwards;
                    `;
                    
                    container.appendChild(heart);
                    
                    setTimeout(() => {
                        if (heart.parentNode) {
                            heart.parentNode.removeChild(heart);
                        }
                    }, 7000);
                }, 2000);
            }

            createGlowEffect() {
                const wrapper = document.querySelector('.photo-wall-wrapper');
                
                const glow = document.createElement('div');
                glow.style.cssText = `
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    width: 700px;
                    height: 700px;
                    background: radial-gradient(circle, rgba(255,182,193,0.15) 0%, transparent 70%);
                    transform: translate(-50%, -50%);
                    pointer-events: none;
                    z-index: 0;
                    animation: pulse 5s ease-in-out infinite;
                `;
                
                wrapper.appendChild(glow);
            }

            startFloatingHearts() {
                setInterval(() => {
                    this.createFloatingHeart();
                }, 4000);
            }

            createFloatingHeart() {
                const hearts = ['üíï', 'üíñ', 'üíó', 'üíò', 'üíù', 'üíû', 'üíü', '‚ù§Ô∏è'];
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDuration = (Math.random() * 4 + 6) + 's';
                heart.style.fontSize = (Math.random() * 1 + 1.5) + 'rem';
                
                this.floatingHearts.appendChild(heart);
                
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, 10000);
            }

            addSparkleEffect(element) {
                const sparkles = document.createElement('div');
                sparkles.className = 'sparkles';
                sparkles.innerHTML = '‚ú®';
                sparkles.style.cssText = `
                    position: absolute;
                    top: -10px;
                    right: -10px;
                    font-size: 1.2rem;
                    animation: sparkle 1s ease-in-out infinite;
                    pointer-events: none;
                `;
                
                element.parentNode.style.position = 'relative';
                element.parentNode.appendChild(sparkles);
            }

            removeSparkleEffect(element) {
                const sparkles = element.parentNode.querySelector('.sparkles');
                if (sparkles) {
                    sparkles.remove();
                }
            }

            // ÁîªÂªäÂäüËÉΩ
            buildGallery() {
                this.photoTrack.innerHTML = '';
                
                this.images.forEach((image, index) => {
                    const slide = document.createElement('div');
                    slide.className = 'photo-slide';
                    
                    slide.innerHTML = `
                        <div class="photo-frame">
                            <img src="${image.src}" alt="${image.name}" loading="lazy">
                            <div class="photo-info">
                                <h3>${image.name}</h3>
                                <p>Á¨¨ ${index + 1} Âº†ÁÖßÁâáÔºåÂÖ± ${this.images.length} Âº†</p>
                            </div>
                        </div>
                    `;
                    
                    this.photoTrack.appendChild(slide);
                });
                
                this.updateSliderPosition();
            }

            buildIndicators() {
                this.indicators.innerHTML = '';
                
                this.images.forEach((_, index) => {
                    const indicator = document.createElement('div');
                    indicator.className = 'indicator';
                    if (index === 0) indicator.classList.add('active');
                    
                    indicator.addEventListener('click', () => {
                        this.goToSlide(index);
                    });
                    
                    this.indicators.appendChild(indicator);
                });
            }

            updateSliderPosition() {
                const translateX = -this.currentSlide * 100;
                this.photoTrack.style.transform = `translateX(${translateX}%)`;
                
                document.querySelectorAll('.indicator').forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === this.currentSlide);
                });
            }

            goToNext() {
                this.currentSlide = (this.currentSlide + 1) % this.images.length;
                this.updateSliderPosition();
                this.resetGalleryAutoPlay();
            }

            goToPrevious() {
                this.currentSlide = (this.currentSlide - 1 + this.images.length) % this.images.length;
                this.updateSliderPosition();
                this.resetGalleryAutoPlay();
            }

            goToSlide(index) {
                this.currentSlide = index;
                this.updateSliderPosition();
                this.resetGalleryAutoPlay();
            }

            startGalleryAutoPlay() {
                if (!this.isAutoPlaying || this.images.length <= 1) return;
                
                this.startProgressBar();
                
                this.autoPlayTimer = setTimeout(() => {
                    this.goToNext();
                }, this.autoPlaySpeed);
            }

            stopGalleryAutoPlay() {
                if (this.autoPlayTimer) {
                    clearTimeout(this.autoPlayTimer);
                    this.autoPlayTimer = null;
                }
                this.stopProgressBar();
            }

            resetGalleryAutoPlay() {
                this.stopGalleryAutoPlay();
                if (this.isAutoPlaying && this.photoGallery.classList.contains('active')) {
                    this.startGalleryAutoPlay();
                }
            }

            toggleGalleryAutoPlay(enabled) {
                this.isAutoPlaying = enabled;
                this.autoPlayCheckbox.checked = enabled;
                
                if (enabled) {
                    this.autoPlayStatus.textContent = 'Ëá™Âä®Êí≠Êîæ‰∏≠';
                    this.startGalleryAutoPlay();
                } else {
                    this.autoPlayStatus.textContent = 'ÊâãÂä®ÊéßÂà∂';
                    this.stopGalleryAutoPlay();
                }
            }

            updatePlaySpeed(value) {
                const speeds = [5000, 4000, 3000, 2000, 1000];
                this.autoPlaySpeed = speeds[value - 1];
                this.resetGalleryAutoPlay();
            }

            startProgressBar() {
                this.progressBar.style.width = '0%';
                this.progressBar.style.transition = `width ${this.autoPlaySpeed}ms linear`;
                
                requestAnimationFrame(() => {
                    this.progressBar.style.width = '100%';
                });
            }

            stopProgressBar() {
                this.progressBar.style.transition = 'none';
                this.progressBar.style.width = '0%';
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 15px 25px;
                    border-radius: 25px;
                    font-size: 1rem;
                    font-weight: 600;
                    z-index: 10000;
                    backdrop-filter: blur(15px);
                    animation: slideInOut 4s ease forwards;
                    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
                `;
                
                switch (type) {
                    case 'success':
                        notification.style.background = 'rgba(76, 175, 80, 0.95)';
                        notification.style.color = 'white';
                        break;
                    case 'warning':
                        notification.style.background = 'rgba(255, 152, 0, 0.95)';
                        notification.style.color = 'white';
                        break;
                    default:
                        notification.style.background = 'rgba(255, 105, 180, 0.95)';
                        notification.style.color = 'white';
                }
                
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 4000);
            }
        }

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            new RomanticPhotoWall();
            
            // Ê∑ªÂä†È°µÈù¢Âä†ËΩΩÂä®Áîª
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 1.2s ease';
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>
</body>
</html>
